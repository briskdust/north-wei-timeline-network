-- 北魏末年人物关系数据库种子数据
-- 插入现有的历史人物数据

-- 清空现有数据（按依赖关系顺序）
TRUNCATE TABLE relationships CASCADE;
TRUNCATE TABLE timeline_events CASCADE;
TRUNCATE TABLE people CASCADE;

-- 插入人物数据
INSERT INTO people (id, name, alias, birth_year, death_year, dynasty, occupation, location, description, image) VALUES
('yuanke', '元恪', ARRAY['宣武帝', '拓跋恪'], 483, 515, '北魏', '皇帝', '洛阳', '北魏第八位皇帝，孝文帝次子。在位期间继续推行汉化政策，但也开始出现政治腐败的苗头。', 'https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400'),

('huchonghua', '胡充华', ARRAY['胡太后', '灵太后'], 488, 528, '北魏', '皇太后', '洛阳', '北魏宣武帝贵嫔，孝明帝生母。宣武帝死后临朝听政，专权跋扈，最终酿成河阴之变。', 'https://images.unsplash.com/photo-1594736797933-d0d30d2c3b88?w=400'),

('yuanxu', '元诩', ARRAY['孝明帝'], 510, 528, '北魏', '皇帝', '洛阳', '北魏第九位皇帝，宣武帝之子。6岁即位，长期受母后胡太后摄政，最终因政见不合被母后毒杀。', 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400'),

('erzhurong', '尔朱荣', ARRAY['天柱大将军'], 493, 530, '北魏', '军阀', '秀容', '北魏末年权臣，并州军阀。发动河阴之变，屠杀王公大臣，拥立孝庄帝，掌握朝政大权。', 'https://images.unsplash.com/photo-1566492031773-4f4e44671d66?w=400'),

('yuanziyou', '元子攸', ARRAY['孝庄帝'], 507, 531, '北魏', '皇帝', '洛阳', '北魏第十一位皇帝，彭城王元勰之子。被尔朱荣拥立，后设计诛杀尔朱荣，最终被尔朱兆攻杀。', 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400'),

('gaohuan', '高欢', ARRAY['东魏丞相', '神武帝'], 496, 547, '东魏', '权臣', '晋阳', '东魏权臣，北齐王朝奠基者。出身六镇，通过军功崛起，建立东魏政权，与宇文泰分庭抗礼。', 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=400'),

('yuwentai', '宇文泰', ARRAY['西魏丞相', '文帝'], 507, 556, '西魏', '权臣', '长安', '西魏权臣，北周王朝奠基者。出身武川镇，建立西魏政权，创建府兵制，奠定隋唐制度基础。', 'https://images.unsplash.com/photo-1507591064344-4c6ce005b128?w=400'),

('yuanxiu', '元修', ARRAY['孝武帝', '出帝'], 510, 535, '北魏', '皇帝', '洛阳', '北魏最后一位皇帝，广平王元怀之子。因与高欢不合西逃长安，后被宇文泰毒杀，北魏灭亡。', 'https://images.unsplash.com/photo-1519085360753-af0119f7cbe7?w=400'),

('yuanshanjian', '元善见', ARRAY['孝静帝'], 524, 552, '东魏', '皇帝', '邺城', '东魏唯一皇帝，清河王元亶之子。11岁被高欢拥立，长期受高氏父子控制，曾被高澄骂''朕！朕！狗脚朕！''，最终被高洋毒杀。', 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400'),

('yuanbaoju', '元宝炬', ARRAY['西魏文帝'], 507, 551, '西魏', '皇帝', '长安', '西魏文帝，京兆王元愉之子。被宇文泰拥立，在位期间推行府兵制等重要改革，为隋唐制度奠定基础。', 'https://images.unsplash.com/photo-1507591064344-4c6ce005b128?w=400'),

('gaocheng', '高澄', ARRAY['文襄皇帝', '世宗'], 521, 549, '东魏', '权臣', '晋阳', '高欢长子，东魏后期实际统治者。继承父业后专权跋扈，曾在宫廷宴会上骂皇帝''朕！朱！狗脚朕！''，发现皇帝挖地道谋害自己时怒问''陛下何意反邪！''，后被刺身亡。', 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=400'),

('louzhaogun', '娄昭君', ARRAY['武明皇后', '石昭君'], 501, 562, '北齐', '皇太后', '代郡平城', '高欢的元配，北齐追尊神武帝高欢元配，文襄帝高澄、文宣帝高洋、孝昭帝高演、武成帝高湛的母亲。为人节俭贤德，亲自纺织，慈爱高欢妾出诸子，曾劝阻高欢追击宇文泰。生育六男二女，其中有四位皇帝（含追封），两位皇后。', 'https://images.unsplash.com/photo-1594736797933-d0d30d2c3b88?w=400');

-- 插入时间线事件数据
INSERT INTO timeline_events (id, person_id, year, title, description, type, location) VALUES
-- 元恪（北魏宣武帝）
('1', 'yuanke', 483, '元恪出生', '拓跋恪（元恪）出生，北魏孝文帝第二子', 'birth', '平城（今山西大同）'),
('2', 'yuanke', 499, '即位为帝', '孝文帝驾崩，元恪即位，是为宣武帝', 'political', '洛阳'),
('3', 'yuanke', 504, '册封胡充华', '册封胡充华为贵嫔，深得宠爱', 'personal', '洛阳宫'),
('4', 'yuanke', 515, '宣武帝驾崩', '元恪驾崩，享年33岁，在位16年', 'death', '洛阳'),

-- 胡充华（胡太后）
('5', 'huchonghua', 488, '胡充华出生', '胡充华出生于安定临泾，司徒胡国珍之女', 'birth', '安定临泾（今甘肃镇原）'),
('6', 'huchonghua', 504, '入宫受宠', '被宣武帝册封为贵嫔，深受宠爱', 'personal', '洛阳宫'),
('7', 'huchonghua', 510, '生子元诩', '为宣武帝生下皇子元诩（后来的孝明帝）', 'personal', '洛阳宫'),
('8', 'huchonghua', 515, '儿子即位', '宣武帝驾崩，6岁的元诩即位，胡充华成为皇太后', 'political', '洛阳'),
('9', 'huchonghua', 515, '临朝听政', '以皇太后身份临朝听政，掌握朝政大权', 'political', '洛阳'),
('10', 'huchonghua', 528, '毒杀孝明帝', '因政见不合，毒杀亲生儿子孝明帝元诩', 'political', '洛阳宫'),
('11', 'huchonghua', 528, '被尔朱荣沉河', '尔朱荣攻入洛阳，将胡太后沉入黄河', 'death', '黄河'),

-- 元诩（北魏孝明帝）
('12', 'yuanxu', 510, '元诩出生', '宣武帝元恪与胡充华之子，生于洛阳宫', 'birth', '洛阳宫'),
('13', 'yuanxu', 515, '6岁即位', '父亲宣武帝驾崩，6岁的元诩即位为孝明帝', 'political', '洛阳'),
('14', 'yuanxu', 520, '开始亲政', '年幼时由母亲胡太后摄政，渐长后与母后政见分歧', 'political', '洛阳'),
('15', 'yuanxu', 528, '密诏尔朱荣', '因与母后政争激化，密诏尔朱荣前来洛阳', 'political', '洛阳'),
('16', 'yuanxu', 528, '被母后毒杀', '胡太后发现密诏，毒杀孝明帝，享年19岁', 'death', '洛阳宫'),

-- 尔朱荣
('17', 'erzhurong', 493, '尔朱荣出生', '尔朱荣出生于秀容（今山西忻州），尔朱新兴之子', 'birth', '秀容（今山西忻州）'),
('18', 'erzhurong', 515, '继承家业', '父亲去世，继承家业，成为并州军阀', 'political', '并州'),
('19', 'erzhurong', 525, '平定叛乱', '率军平定六镇起义，声威大震', 'military', '六镇地区'),
('20', 'erzhurong', 528, '河阴之变', '奉孝明帝密诏进军洛阳，发动河阴之变，诛杀胡太后及王公大臣两千余人', 'political', '洛阳河阴'),
('21', 'erzhurong', 528, '拥立孝庄帝', '拥立元子攸为孝庄帝，自己掌握实权', 'political', '洛阳'),
('22', 'erzhurong', 530, '被孝庄帝诛杀', '入宫朝见时被孝庄帝设伏诛杀，享年38岁', 'death', '洛阳宫'),

-- 元子攸（北魏孝庄帝）
('23', 'yuanziyou', 507, '元子攸出生', '彭城王元勰之子，北魏宗室', 'birth', '洛阳'),
('24', 'yuanziyou', 528, '被拥立为帝', '河阴之变后，被尔朱荣拥立为孝庄帝', 'political', '洛阳'),
('25', 'yuanziyou', 530, '诛杀尔朱荣', '设伏诛杀权臣尔朱荣，夺回皇权', 'political', '洛阳宫'),
('26', 'yuanziyou', 531, '被尔朱兆攻杀', '尔朱荣之侄尔朱兆攻入洛阳，孝庄帝被杀，享年25岁', 'death', '洛阳'),

-- 高欢
('27', 'gaohuan', 496, '高欢出生', '高欢出生于怀朔镇（今内蒙古固阳），汉族', 'birth', '怀朔镇（今内蒙古固阳）'),
('28', 'gaohuan', 524, '参与六镇起义', '六镇起义爆发，高欢参与其中', 'military', '六镇地区'),
('29', 'gaohuan', 532, '击败尔朱兆', '在韩陵山之战中击败尔朱兆，控制河北', 'military', '韩陵山'),
('30', 'gaohuan', 534, '拥立孝静帝', '拥立元善见为孝静帝，迁都邺城，建立东魏', 'political', '邺城'),
('31', 'gaohuan', 537, '沙苑之战', '与宇文泰在沙苑决战，败北', 'military', '沙苑（今陕西大荔）'),
('32', 'gaohuan', 547, '高欢去世', '高欢病逝于晋阳，享年52岁', 'death', '晋阳（今山西太原）'),

-- 宇文泰
('33', 'yuwentai', 507, '宇文泰出生', '宇文泰出生于武川镇（今内蒙古武川），鲜卑族', 'birth', '武川镇（今内蒙古武川）'),
('34', 'yuwentai', 524, '随军征战', '六镇起义后，投靠贺拔岳，开始军旅生涯', 'military', '关陇地区'),
('35', 'yuwentai', 535, '拥立文帝', '拥立元宝炬为文帝，建立西魏政权', 'political', '长安'),
('36', 'yuwentai', 537, '沙苑大胜', '在沙苑之战中以少胜多，击败高欢大军', 'military', '沙苑（今陕西大荔）'),
('37', 'yuwentai', 556, '宇文泰去世', '宇文泰病逝于长安，享年50岁', 'death', '长安'),

-- 元修（北魏孝武帝）
('38', 'yuanxiu', 510, '元修出生', '广平王元怀之子，北魏宗室', 'birth', '洛阳'),
('39', 'yuanxiu', 532, '被拥立为帝', '高欢拥立元修为孝武帝', 'political', '洛阳'),
('40', 'yuanxiu', 534, '西逃长安', '因与高欢政见不合，西逃长安投靠宇文泰', 'political', '长安'),
('41', 'yuanxiu', 535, '被宇文泰毒杀', '因与宇文泰产生矛盾，被宇文泰毒杀，享年25岁', 'death', '长安'),

-- 元善见（东魏孝静帝）
('42', 'yuanshanjian', 524, '元善见出生', '清河王元亶之子，北魏宗室', 'birth', '洛阳'),
('43', 'yuanshanjian', 534, '被拥立为帝', '高欢拥立11岁的元善见为孝静帝，迁都邺城', 'political', '邺城'),
('44', 'yuanshanjian', 547, '高欢去世', '高欢病逝，其子高澄继承父业，继续控制朝政', 'political', '邺城'),
('45', 'yuanshanjian', 549, '与高澄冲突', '因不满高澄专权，与高澄发生激烈冲突', 'political', '邺城'),
('46', 'yuanshanjian', 550, '东魏灭亡', '高洋废黜孝静帝，建立北齐，东魏灭亡', 'political', '邺城'),
('47', 'yuanshanjian', 552, '被毒杀', '被高洋毒杀，享年28岁', 'death', '邺城'),

-- 元宝炬（西魏文帝）
('48', 'yuanbaoju', 507, '元宝炬出生', '京兆王元愉之子，北魏宗室', 'birth', '洛阳'),
('49', 'yuanbaoju', 535, '被拥立为帝', '宇文泰拥立元宝炬为文帝，建立西魏政权', 'political', '长安'),
('50', 'yuanbaoju', 537, '沙苑之战', '宇文泰率军在沙苑大败高欢，巩固西魏政权', 'military', '沙苑（今陕西大荔）'),
('51', 'yuanbaoju', 546, '推行改革', '在宇文泰主导下推行府兵制等重要改革', 'political', '长安'),
('52', 'yuanbaoju', 551, '文帝驾崩', '元宝炬驾崩，享年45岁，在位16年', 'death', '长安'),

-- 高澄
('53', 'gaocheng', 521, '高澄出生', '高欢长子，生于晋阳', 'birth', '晋阳（今山西太原）'),
('54', 'gaocheng', 540, '开始参政', '开始协助父亲高欢处理政务，展现政治才能', 'political', '邺城'),
('55', 'gaocheng', 547, '继承父业', '高欢病逝，高澄继承父亲职位，成为东魏实际统治者', 'political', '晋阳'),
('56', 'gaocheng', 549, '宫廷宴会失礼', '在宫廷宴会上，高澄举觞劝酒，元善见回应''自古无不亡之国，朕亦何用此活！''高澄勃然大怒，骂道：''朕！朕！狗脚朕！''并命崔季舒打了皇帝三拳', 'political', '邺城'),
('57', 'gaocheng', 549, '发现皇帝挖地道', '发现元善见在宫中挖地道谋害自己，怒问：''陛下何意反邪！''君臣关系彻底决裂', 'political', '邺城'),
('58', 'gaocheng', 549, '被刺身亡', '在晋阳被厨师兰京刺杀身亡，享年29岁', 'death', '晋阳'),

-- 娄昭君
('59', 'louzhaogun', 501, '娄昭君出生', '娄昭君出生于代郡平城（今大同市），娄内干之女，鲜卑人', 'birth', '代郡平城（今山西大同）'),
('60', 'louzhaogun', 520, '嫁给高欢', '年轻时美貌，众多豪族礼聘为妻都不答应，见城头站岗的士兵高欢有气度，派婢女通意，父母不得已同意', 'personal', '晋阳'),
('61', 'louzhaogun', 521, '生子高澄', '为高欢生下长子高澄（后来的文襄帝）', 'personal', '晋阳'),
('62', 'louzhaogun', 529, '生子高洋', '为高欢生下次子高洋（后来的文宣帝）', 'personal', '晋阳'),
('63', 'louzhaogun', 535, '让出正室之位', '高欢联合柔然，娶蠕蠕公主，娄昭君让出正室之位，体现贤德', 'personal', '晋阳'),
('64', 'louzhaogun', 537, '劝止追击宇文泰', '沙苑之战后，侯景想追击宇文泰，高欢开始同意，后来娄昭君劝说，高欢乃止', 'political', '沙苑'),
('65', 'louzhaogun', 547, '丈夫去世', '高欢病逝，儿子高澄嗣位，娄昭君进为王太妃', 'personal', '晋阳'),
('66', 'louzhaogun', 550, '尊为皇太后', '高洋受东魏禅，建立北齐，尊娄昭君为宣训宫皇太后', 'political', '邺城'),
('67', 'louzhaogun', 559, '立武成帝', '孝昭帝高演崩，太后下诏立武成帝高湛', 'political', '邺城'),
('68', 'louzhaogun', 562, '改姓石氏', '大宁二年春，娄太后听信女巫的话，改姓为石氏，是为石昭君', 'personal', '邺城'),
('69', 'louzhaogun', 562, '驾崩', '四月辛丑（5月20日），在北宫驾崩，时年六十二岁，谥号武明皇后，与高欢合葬义平陵', 'death', '邺城北宫');

-- 插入人物关系数据
INSERT INTO relationships (id, person1_id, person2_id, type, description, start_year, end_year) VALUES
-- 元恪的关系
('1', 'yuanke', 'huchonghua', 'spouse', '宣武帝元恪与贵嫔胡充华', 504, 515),
('2', 'yuanke', 'yuanxu', 'parent', '宣武帝元恪是孝明帝元诩的父亲', 510, 515),

-- 胡充华的关系
('3', 'huchonghua', 'yuanxu', 'parent', '胡充华是孝明帝元诩的母亲', 510, 528),
('4', 'huchonghua', 'erzhurong', 'enemy', '胡太后与尔朱荣政治对立', 515, 528),

-- 元诩的关系
('5', 'yuanxu', 'erzhurong', 'ally', '孝明帝密诏尔朱荣对抗母后', 528, 528),

-- 尔朱荣的关系
('6', 'erzhurong', 'yuanziyou', 'political', '尔朱荣拥立孝庄帝元子攸', 528, 530),
('7', 'erzhurong', 'gaohuan', 'ally', '尔朱荣曾与高欢同为六镇将领', 525, 528),

-- 元子攸的关系
('8', 'yuanziyou', 'gaohuan', 'political', '孝庄帝死后，高欢崛起', 531, 531),

-- 高欢的关系
('9', 'gaohuan', 'yuanxiu', 'political', '高欢拥立孝武帝元修', 532, 534),
('10', 'gaohuan', 'yuwentai', 'enemy', '高欢与宇文泰东西对峙', 534, 547),

-- 宇文泰的关系
('11', 'yuwentai', 'yuanxiu', 'political', '宇文泰接纳西逃的孝武帝', 534, 535),

-- 其他重要关系
('12', 'yuanke', 'yuanziyou', 'family', '宗室关系，都是北魏皇室成员', 507, 515),
('13', 'yuanxu', 'yuanxiu', 'family', '宗室关系，都是北魏皇室成员', 510, 528),

-- 新增关系
('14', 'gaohuan', 'yuanshanjian', 'political', '高欢拥立元善见为孝静帝', 534, 547),
('15', 'yuwentai', 'yuanbaoju', 'political', '宇文泰拥立元宝炬为西魏文帝', 535, 551),
('16', 'gaohuan', 'gaocheng', 'parent', '高欢是高澄的父亲', 521, 547),
('17', 'gaocheng', 'yuanshanjian', 'enemy', '高澄发现元善见在宫中挖地道谋害自己，怒问：''陛下何意反邪！''', 547, 549),
('18', 'yuanshanjian', 'yuanbaoju', 'political', '东西魏分立，两位皇帝分别统治', 535, 550),
('19', 'yuanxiu', 'yuanbaoju', 'family', '宗室关系，都是北魏皇室成员', 507, 535),
('20', 'yuanshanjian', 'yuanxiu', 'family', '宗室关系，都是北魏皇室成员', 524, 535),

-- 娄昭君的关系
('21', 'louzhaogun', 'gaohuan', 'spouse', '娄昭君是高欢的元配夫人', 520, 547),
('22', 'louzhaogun', 'gaocheng', 'parent', '娄昭君是高澄的母亲', 521, 562),
('23', 'louzhaogun', 'yuwentai', 'political', '沙苑之战后，娄昭君劝阻高欢追击宇文泰', 537, 537);

-- 创建一些有用的统计查询示例
-- 查看数据插入结果
SELECT 
    '人物总数' as 统计项目, 
    COUNT(*)::text as 数量 
FROM people
UNION ALL
SELECT 
    '时间线事件总数', 
    COUNT(*)::text 
FROM timeline_events
UNION ALL
SELECT 
    '关系总数', 
    COUNT(*)::text 
FROM relationships;

-- 按朝代统计人物
SELECT 
    dynasty as 朝代,
    COUNT(*) as 人物数量,
    MIN(birth_year) as 最早出生年,
    MAX(COALESCE(death_year, birth_year + 70)) as 最晚去世年
FROM people 
GROUP BY dynasty 
ORDER BY 人物数量 DESC; 